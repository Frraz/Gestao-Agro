<!-- /src/templates/admin/auditoria.html -->

{% extends "layouts/base.html" %}
{% block title %}Painel de Auditoria{% endblock %}
{% block content %}
<h2>Painel de Auditoria</h2>
<div class="table-responsive">
  <form method="get" class="mb-3 row g-2 align-items-end">
    <div class="col-auto">
      <label for="data_ini" class="form-label">De:</label>
      <input type="date" name="data_ini" id="data_ini" class="form-control" value="{{ request.args.get('data_ini', '') }}">
    </div>
    <div class="col-auto">
      <label for="data_fim" class="form-label">Até:</label>
      <input type="date" name="data_fim" id="data_fim" class="form-control" value="{{ request.args.get('data_fim', '') }}">
    </div>
    <div class="col-auto">
      <label for="usuario" class="form-label">Usuário:</label>
      <input type="text" name="usuario" id="usuario" class="form-control" value="{{ request.args.get('usuario', '') }}">
    </div>
    <div class="col-auto">
      <label for="entidade" class="form-label">Entidade:</label>
      <select name="entidade" id="entidade" class="form-select">
        <option value="">Todas</option>
        <option value="Documento" {% if request.args.get('entidade')=='Documento' %}selected{% endif %}>Documento</option>
        <option value="Pessoa" {% if request.args.get('entidade')=='Pessoa' %}selected{% endif %}>Pessoa</option>
        <option value="Fazenda" {% if request.args.get('entidade')=='Fazenda' %}selected{% endif %}>Fazenda</option>
      </select>
    </div>
    <div class="col-auto">
      <label for="acao" class="form-label">Ação:</label>
      <select name="acao" id="acao" class="form-select">
        <option value="">Todas</option>
        <option value="criação" {% if request.args.get('acao')=='criação' %}selected{% endif %}>Criação</option>
        <option value="edição" {% if request.args.get('acao')=='edição' %}selected{% endif %}>Edição</option>
        <option value="exclusão" {% if request.args.get('acao')=='exclusão' %}selected{% endif %}>Exclusão</option>
      </select>
    </div>
    <div class="col-auto">
      <label for="nome_fazenda" class="form-label">Nome da Fazenda:</label>
      <input type="text" name="nome_fazenda" id="nome_fazenda" class="form-control" value="{{ request.args.get('nome_fazenda', '') }}">
    </div>
    <div class="col-auto">
      <label for="nome_pessoa" class="form-label">Nome da Pessoa:</label>
      <input type="text" name="nome_pessoa" id="nome_pessoa" class="form-control" value="{{ request.args.get('nome_pessoa', '') }}">
    </div>
    <div class="col-auto">
      <button class="btn btn-primary" type="submit">Filtrar</button>
    </div>
  </form>
  <div id="auditoria-table">
    {% include "admin/_auditoria_table.html" %}
  </div>
</div>
<script src="{{ url_for('static', filename='js/auditoria.js') }}"></script>
{% endblock %}